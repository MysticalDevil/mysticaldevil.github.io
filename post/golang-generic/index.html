<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>Go æ–°ç‰¹æ€§ -- æ³›å‹ - MysticalDevil&#39;s Blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="MysticalDevil" /><meta name="description" content="åºè¨€ 2022å¹´3æœˆ15æ—¥ï¼Œäº‰è®®éå¸¸å¤§ä½†åŒæ—¶ä¹Ÿå¤‡å—æœŸå¾…çš„æ³›å‹ç»ˆäºä¼´éšç€ Go 1.18 å‘å¸ƒäº†ã€‚è®¾è®¡è€…ä¹‹å‰è¿˜è¯´ä¸ºäº† Go è¯­è¨€çš„ç®€æ´ï¼Œä¸ä¼šåŠ å…¥æ³›å‹ğŸ™„ ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›" /><meta name="keywords" content="Hugo, theme, even, blog, mystical, devil, mysticaldevil, programming" />






<meta name="generator" content="Hugo 0.109.0 with theme even" />


<link rel="canonical" href="/post/golang-generic/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<link href="/sass/main.min.f92fd13721ddf72129410fd8250e73152cc6f2438082b6c0208dc24ee7c13fc4.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="Go æ–°ç‰¹æ€§ -- æ³›å‹" />
<meta property="og:description" content="åºè¨€ 2022å¹´3æœˆ15æ—¥ï¼Œäº‰è®®éå¸¸å¤§ä½†åŒæ—¶ä¹Ÿå¤‡å—æœŸå¾…çš„æ³›å‹ç»ˆäºä¼´éšç€ Go 1.18 å‘å¸ƒäº†ã€‚è®¾è®¡è€…ä¹‹å‰è¿˜è¯´ä¸ºäº† Go è¯­è¨€çš„ç®€æ´ï¼Œä¸ä¼šåŠ å…¥æ³›å‹ğŸ™„ ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›" />
<meta property="og:type" content="article" />
<meta property="og:url" content="/post/golang-generic/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2023-01-23T19:50:59+08:00" />
<meta property="article:modified_time" content="2023-01-23T19:50:59+08:00" />
<meta itemprop="name" content="Go æ–°ç‰¹æ€§ -- æ³›å‹">
<meta itemprop="description" content="åºè¨€ 2022å¹´3æœˆ15æ—¥ï¼Œäº‰è®®éå¸¸å¤§ä½†åŒæ—¶ä¹Ÿå¤‡å—æœŸå¾…çš„æ³›å‹ç»ˆäºä¼´éšç€ Go 1.18 å‘å¸ƒäº†ã€‚è®¾è®¡è€…ä¹‹å‰è¿˜è¯´ä¸ºäº† Go è¯­è¨€çš„ç®€æ´ï¼Œä¸ä¼šåŠ å…¥æ³›å‹ğŸ™„ ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›"><meta itemprop="datePublished" content="2023-01-23T19:50:59+08:00" />
<meta itemprop="dateModified" content="2023-01-23T19:50:59+08:00" />
<meta itemprop="wordCount" content="7690">
<meta itemprop="keywords" content="Go,Generic," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Go æ–°ç‰¹æ€§ -- æ³›å‹"/>
<meta name="twitter:description" content="åºè¨€ 2022å¹´3æœˆ15æ—¥ï¼Œäº‰è®®éå¸¸å¤§ä½†åŒæ—¶ä¹Ÿå¤‡å—æœŸå¾…çš„æ³›å‹ç»ˆäºä¼´éšç€ Go 1.18 å‘å¸ƒäº†ã€‚è®¾è®¡è€…ä¹‹å‰è¿˜è¯´ä¸ºäº† Go è¯­è¨€çš„ç®€æ´ï¼Œä¸ä¼šåŠ å…¥æ³›å‹ğŸ™„ ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">DEvil</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>

  


</nav>

  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">DEvil</a>
</div>





<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about">About</a>
      </li>
  </ul>
</nav>

    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">Go æ–°ç‰¹æ€§ -- æ³›å‹</h1>

      <div class="post-meta">
        <span class="post-time"> 2023-01-23 </span>
        <div class="post-category">
            <a href="/categories/go/"> Go </a>
            <a href="/categories/programming/"> Programming </a>
            <a href="/categories/notes/"> â€œNotes&#34; </a>
            </div>
          <span class="more-meta"> çº¦ 7690 å­— </span>
          <span class="more-meta"> é¢„è®¡é˜…è¯» 16 åˆ†é’Ÿ </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡é˜…è¯» </span>
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">æ–‡ç« ç›®å½•</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li><a href="#åºè¨€">åºè¨€</a></li>
        <li><a href="#ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›å‹">ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›å‹</a></li>
        <li><a href="#go-çš„æ³›å‹">Go çš„æ³›å‹</a>
          <ul>
            <li><a href="#ç±»å‹å½¢å‚ç±»å‹å®å‚ç±»å‹çº¦æŸå’Œæ³›å‹ç±»å‹">ç±»å‹å½¢å‚ã€ç±»å‹å®å‚ã€ç±»å‹çº¦æŸå’Œæ³›å‹ç±»å‹</a></li>
            <li><a href="#å…¶ä»–çš„æ³›å‹ç±»å‹">å…¶ä»–çš„æ³›å‹ç±»å‹</a></li>
            <li><a href="#ç±»å‹å½¢å‚çš„åµŒå¥—">ç±»å‹å½¢å‚çš„åµŒå¥—</a></li>
            <li><a href="#å¸¸è§è¯­æ³•é”™è¯¯">å¸¸è§è¯­æ³•é”™è¯¯</a></li>
            <li><a href="#ç‰¹æ®Šçš„æ³›å‹ç±»å‹">ç‰¹æ®Šçš„æ³›å‹ç±»å‹</a></li>
            <li><a href="#æ³›å‹ç±»å‹çš„å¥—å¨ƒ">æ³›å‹ç±»å‹çš„å¥—å¨ƒ</a></li>
            <li><a href="#ç±»å‹çº¦æŸçš„ä¸¤ç§å†™æ³•">ç±»å‹çº¦æŸçš„ä¸¤ç§å†™æ³•</a></li>
          </ul>
        </li>
        <li><a href="#æ³›å‹-receiver">æ³›å‹ Receiver</a>
          <ul>
            <li><a href="#åŸºäºæ³›å‹çš„é˜Ÿåˆ—">åŸºäºæ³›å‹çš„é˜Ÿåˆ—</a></li>
          </ul>
        </li>
        <li><a href="#æ³›å‹å‡½æ•°">æ³›å‹å‡½æ•°</a>
          <ul>
            <li><a href="#æ³›å‹æ–¹æ³•">æ³›å‹æ–¹æ³•ï¼Ÿ</a></li>
          </ul>
        </li>
        <li><a href="#å°ç»“">å°ç»“</a></li>
        <li><a href="#å˜å¤æ‚çš„æ¥å£">å˜å¤æ‚çš„æ¥å£</a>
          <ul>
            <li><a href="#æŒ‡å®šåº•å±‚ç±»å‹-">æŒ‡å®šåº•å±‚ç±»å‹ï¼š ~</a></li>
            <li><a href="#ä»æ–¹æ³•é›†method-typeåˆ°ç±»å‹é›†type-set">ä»æ–¹æ³•é›†ï¼ˆMethod Typeï¼‰åˆ°ç±»å‹é›†ï¼ˆType Setï¼‰</a></li>
            <li><a href="#æ¥å£å®šä¹‰çš„å˜åŒ–">æ¥å£å®šä¹‰çš„å˜åŒ–</a></li>
            <li><a href="#ç±»å‹çš„å¹¶é›†">ç±»å‹çš„å¹¶é›†</a></li>
            <li><a href="#ç±»å‹çš„äº¤é›†">ç±»å‹çš„äº¤é›†</a></li>
            <li><a href="#ç©ºæ¥å£å’Œ-any">ç©ºæ¥å£å’Œ <code>any</code></a></li>
            <li><a href="#å¯æ¯”è¾ƒcomparableå’Œå¯æ’åºordered">å¯æ¯”è¾ƒï¼ˆComparableï¼‰å’Œå¯æ’åºï¼ˆOrderedï¼‰</a></li>
            <li><a href="#æ¥å£çš„ä¸¤ç§ç±»å‹">æ¥å£çš„ä¸¤ç§ç±»å‹</a></li>
            <li><a href="#æ³›å‹æ¥å£">æ³›å‹æ¥å£</a></li>
            <li><a href="#æ¥å£å®šä¹‰çš„ç§ç§é™åˆ¶">æ¥å£å®šä¹‰çš„ç§ç§é™åˆ¶</a></li>
          </ul>
        </li>
        <li><a href="#æ€»ç»“">æ€»ç»“</a></li>
        <li><a href="#å‚è€ƒ">å‚è€ƒ</a></li>
      </ul>
    </li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <h2 id="åºè¨€">åºè¨€</h2>
<p>2022å¹´3æœˆ15æ—¥ï¼Œäº‰è®®éå¸¸å¤§ä½†åŒæ—¶ä¹Ÿå¤‡å—æœŸå¾…çš„æ³›å‹ç»ˆäºä¼´éšç€ Go 1.18 å‘å¸ƒäº†ã€‚<del>è®¾è®¡è€…ä¹‹å‰è¿˜è¯´ä¸ºäº† Go è¯­è¨€çš„ç®€æ´ï¼Œä¸ä¼šåŠ å…¥æ³›å‹ğŸ™„</del></p>
<h2 id="ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›å‹">ä¸ºä»€ä¹ˆè¦å¼•å…¥æ³›å‹</h2>
<p>åœ¨ 1.18 ç‰ˆæœ¬ä¹‹å‰ï¼Œå¦‚æœæƒ³åœ¨ Go è¯­è¨€ä¸­è®©ä¸€ä¸ªå‡½æ•°/æ–¹æ³•æ”¯æŒå¤šç§ç±»å‹ï¼Œé‚£ä¹ˆå¼€å‘è€…åªèƒ½ä¸ºæ¯ä¸ªç±»å‹æŒ¨ä¸ªå®ç°ç›¸å…³çš„å‡½æ•°/æ–¹æ³•ã€‚æ¯”å¦‚æˆ‘æœ‰ä¸€ä¸ª Add å‡½æ•°ï¼Œå®šä¹‰å¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">int</span><span class="p">)</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ä¸Šé¢çš„å‡½æ•°åªæ”¯æŒ int ç±»å‹ï¼Œå¦‚æœæˆ‘æƒ³æ”¯æŒå…¶ä»–ç±»å‹é‚£ä¹ˆéœ€è¦ä¸ºæ¯ä¸ªç±»å‹éƒ½å†™ä¸€ä¸ªå¯¹åº”å‡½æ•°ï¼ˆæ¯”å¦‚è‘—åçš„caståŒ…ï¼Œç”¨äºç±»å‹è½¬æ¢ï¼‰ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">AddFloat32</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">float32</span><span class="p">)</span> <span class="kt">float32</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">AddFloat64</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="kt">float64</span><span class="p">)</span> <span class="kt">float64</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¹Ÿå¤ªéº»çƒ¦äº†å§ï¼ŒğŸŒ¿</p>
<p>ä¸è¿‡æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨ ç©ºæ¥å£ <code>interface{}</code> åŠ åå°„çš„æ–¹å¼å®ç°ï¼ˆç°åœ¨ç©ºæ¥å£è¢«åŒ…è£…ä¸º <code>any</code> å…³é”®å­—ï¼‰ï¼Œä½¿ç”¨å¦‚ä¸‹æ–¹å¼æ¥å®ç°ã€‚<del>è¿™ä¸æ˜¯æ›´éº»çƒ¦å—</del></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">x</span> <span class="nx">any</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">t</span> <span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">TypeOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nx">v</span> <span class="o">:=</span> <span class="nx">reflect</span><span class="p">.</span><span class="nf">ValueOf</span><span class="p">(</span><span class="nx">x</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">switch</span> <span class="nx">t</span><span class="p">.</span><span class="nf">Kind</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Int</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;x is an int with value&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Int</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">String</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;x is a string with value&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nf">String</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">case</span> <span class="nx">reflect</span><span class="p">.</span><span class="nx">Float64</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;x is a float64 with value&#34;</span><span class="p">,</span> <span class="nx">v</span><span class="p">.</span><span class="nf">Float</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="k">default</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nx">fmt</span><span class="p">.</span><span class="nf">Println</span><span class="p">(</span><span class="s">&#34;x is of unknown type&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯è¿™ç§å®ç°æ–¹æ³•æœ‰å¾ˆå¤šé—®é¢˜ï¼š
1. ç”¨èµ·æ¥å¾ˆéº»çƒ¦ï¼Œåæ­£ go è¯­è¨€çš„åå°„æˆ‘æ˜¯æ²¡æ€ä¹ˆå†™æ˜ç™½
2. ç¼ºå°‘äº†ç¼–è¯‘æ—¶çš„ç±»å‹æ£€æŸ¥ï¼Œå¾ˆå®¹æ˜“å‡ºé”™ï¼Œè¿™å¯¹äºæˆ‘ä»¬å®ç°çš„åº”ç”¨æ¥è¯´æ˜¯å¾ˆè‡´å‘½çš„
3. æ€§èƒ½ä¸ç†æƒ³ï¼Œå› ä¸ºåå°„æ˜¯è¿è¡Œæ—¶çš„ä¸œè¥¿</p>
<p>è€Œåœ¨æ³›å‹é€‚ç”¨çš„æ—¶å€™ï¼Œå®ƒèƒ½è§£å†³ä¸Šé¢è¿™äº›é—®é¢˜ã€‚ä½†è¿™ä¹Ÿä¸æ„å‘³ç€æ³›å‹æ˜¯ä¸‡é‡‘æ²¹ï¼Œæ³›å‹æœ‰ç€è‡ªå·±çš„é€‚ç”¨åœºæ™¯ï¼Œå½“ä½ ç–‘æƒ‘æ˜¯ä¸æ˜¯è¯¥ç”¨æ³›å‹çš„è¯ï¼Œè¯·è®°ä½ä¸‹é¢è¿™æ¡ç»éªŒï¼š</p>
<blockquote>
<p>å¦‚æœä½ ç»å¸¸è¦åˆ†åˆ«ä¸ºä¸åŒçš„ç±»å‹å†™å®Œå…¨ç›¸åŒé€»è¾‘çš„ä»£ç ï¼Œé‚£ä¹ˆä½¿ç”¨æ³›å‹å°†æ˜¯æœ€åˆé€‚çš„é€‰æ‹©</p>
</blockquote>
<h2 id="go-çš„æ³›å‹">Go çš„æ³›å‹</h2>
<p>Go è¯­è¨€å¼•å…¥äº†å¦‚ä¸‹çš„æ–°æ¦‚å¿µæ¥å®ç°æ³›å‹</p>
<ul>
<li>ç±»å‹å½¢å‚ï¼ˆType parameterï¼‰</li>
<li>ç±»å‹å®å‚ï¼ˆType argumentï¼‰</li>
<li>ç±»å‹å½¢å‚åˆ—è¡¨ï¼ˆType parameter listï¼‰</li>
<li>ç±»å‹çº¦æŸï¼ˆType constraintï¼‰</li>
<li>å®ä¾‹åŒ–ï¼ˆInstantiationsï¼‰</li>
<li>æ³›å‹ç±»å‹ï¼ˆGeneric typeï¼‰</li>
<li>æ³›å‹æ¥æ”¶å™¨ï¼ˆGeneric receiverï¼‰</li>
<li>æ³›å‹å‡½æ•°ï¼ˆGeneric functionï¼‰</li>
</ul>
<p>ç­‰ç­‰ç­‰ç­‰. . .è¿™ TM ä¹Ÿå¤ªå¤šäº†å§ï¼Œä¸‹é¢æ¥ä¸€ä¸ªä¸ªä»‹ç»ä¸€ä¸‹</p>
<h3 id="ç±»å‹å½¢å‚ç±»å‹å®å‚ç±»å‹çº¦æŸå’Œæ³›å‹ç±»å‹">ç±»å‹å½¢å‚ã€ç±»å‹å®å‚ã€ç±»å‹çº¦æŸå’Œæ³›å‹ç±»å‹</h3>
<p>åœ¨ 1.18 ä¹‹å‰ï¼ŒNewType ä¸€èˆ¬åªå…è®¸æœ‰ä¸€ä¸ªç±»å‹ï¼Œä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">IntSlice</span> <span class="p">[]</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="nx">IntSlice</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="nx">IntSlice</span> <span class="p">=</span> <span class="p">[]</span><span class="nb">float64</span><span class="p">(</span><span class="mf">1.</span><span class="nx">o</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">)</span> <span class="c1">// error å› ä¸º IntSlice åº•å±‚ä¸º []int
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>é‚£æˆ‘æƒ³è¦ä¸€ä¸ªå¯ä»¥å®¹çº³å…¶ä»–ç±»å‹çš„åˆ‡ç‰‡æ€ä¹ˆåŠï¼Ÿç®€å•ï¼Œå¯¹åº”çš„æ¯ä¸ªç±»å‹å†™ä¸€ä¸ªå°±è¡Œ<del>ğŸŒ¿</del></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Float32Slice</span> <span class="p">[]</span><span class="kt">float32</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Float64Slice</span> <span class="p">[]</span><span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">StringSlice</span> <span class="p">[]</span><span class="kt">string</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ³›å‹çš„å¼•å…¥å°±å¾ˆå¥½çš„è§£å†³äº†è¿™ä¸€é—®é¢˜ï¼Œå³</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä¸åŒäºå…¶ä»–è¯­è¨€çš„æ³›å‹ä½¿ç”¨å°–æ‹¬å·<code>&lt;&gt;</code>ï¼ŒGoè¯­è¨€ä¸ºäº†ç¼–è¯‘å™¨çš„ç®€å•ï¼ˆä¸æ˜¯æˆ‘è¯´çš„ï¼‰ä½¿ç”¨äº†æ–¹æ‹¬å·<code>[]</code> <del>ä¹ŸæŒºåäººç±»çš„</del></p>
<p>å¯¹äºä»¥ä¸Šä¸ªå„éƒ¨åˆ†å¯¹åº”çš„æ¦‚å¿µå¦‚ä¸‹</p>
<ul>
<li><code>T</code> ä¸º<strong>ç±»å‹å½¢å‚</strong>ï¼Œåœ¨å®šä¹‰ Slice çš„ç±»å‹æ—¶ä¸ä»£è¡¨å…·ä½“çš„ç±»å‹ï¼Œåªä½œä¸ºä¸€ä¸ªå ä½ç¬¦</li>
<li><code>int | float32 | float64 | string</code> ä¸º<strong>ç±»å‹çº¦æŸ</strong>ï¼Œä¸­é—´çš„<code>|</code>å°±æ˜¯å‘Šè¯‰ç¼–è¯‘å™¨æˆ‘åªæ¥å—è¿™å››ç§ç±»å‹çš„å®å‚</li>
<li>ä¸­æ‹¬å·é‡Œçš„<code>[T int | float32 | float64 | string]</code>ä¸€æ•´ä¸²å› ä¸ºå®šä¹‰äº†æ‰€æœ‰çš„ç±»å‹å½¢å‚ï¼Œæ‰€ä»¥ç§°å…¶ä¸º<strong>ç±»å‹å½¢å‚åˆ—è¡¨</strong></li>
<li>è¿™é‡Œå®šä¹‰äº†ä¸€ä¸ª NewType ä¸º Slice[T]</li>
</ul>
<p>è¿™ç§ç±»å‹å®šä¹‰ä¸­å¸¦ç±»å‹å½¢å‚çš„ç±»å‹ï¼Œç§°ä¹‹ä¸º<strong>æ³›å‹ç±»å‹</strong></p>
<p>æ³›å‹ç±»å‹ä¸èƒ½ç›´æ¥ä½¿ç”¨ï¼Œéœ€è¦ä¼ å…¥<strong>ç±»å‹å®å‚</strong>ï¼Œå³ç±»å‹å½¢å‚åˆ—è¡¨ä¸­çš„ç±»å‹ï¼Œè€Œä¼ å…¥ç±»å‹çš„æ“ä½œè¢«ç§°ä¸º<strong>å®ä¾‹åŒ–</strong>ï¼Œä¾‹å¦‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// è¿™é‡Œä¼ å…¥äº†ç±»å‹å®å‚ intï¼Œæ³›å‹ç±»å‹ Slice[T] è¢«å®ä¾‹åŒ–äº†å…·ä½“çš„ç±»å‹ä¸º Slice[int]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Type Name: %T\n&#34;</span><span class="p">,</span> <span class="nx">a</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// è¿™é‡Œè¢«å®ä¾‹åŒ–ä¸ºäº† Slice[string]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">s</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="s">&#34;a&#34;</span><span class="p">,</span> <span class="s">&#34;b&#34;</span><span class="p">,</span> <span class="s">&#34;c&#34;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;Type Name: %t\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼Œbyte ä¸åœ¨ç±»å‹çº¦æŸä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">b</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">byte</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">{</span><span class="sc">&#39;a&#39;</span><span class="p">,</span> <span class="sc">&#39;b&#39;</span><span class="p">,</span> <span class="sc">&#39;c&#39;</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ç±»å‹å½¢å‚çš„æ•°é‡ä¸æ­¢æœ‰ä¸€ä¸ª  <del>è¿™ä¸ªæ³›å‹mapå°±å¼€å§‹åäººç±»äº†ï¼Œè¿™ä¹ˆå¤š<code>[]</code>ï¼Œæœ‰ç‚¹çœ¼èŠ±</del></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// NewMap å®šä¹‰ä¸¤ä¸ªç±»å‹å½¢å‚ Kï¼Œ V
</span></span></span><span class="line"><span class="cl"><span class="c1">// è¿™ä¸ªç±»å‹çš„åå­—å°±å«åš: NewMap[K, V]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewMap</span> <span class="p">[</span><span class="nx">K</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">,</span> <span class="nx">V</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="kd">map</span><span class="p">[</span><span class="nx">KEY</span><span class="p">]</span><span class="nx">VALUE</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">m</span> <span class="nx">NewMap</span><span class="p">[</span><span class="kt">int</span><span class="p">,</span> <span class="kt">float64</span><span class="p">]</span> <span class="p">=</span> <span class="kd">map</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span><span class="kt">float64</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="mi">1</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="mi">2</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å…¶ä»–çš„æ³›å‹ç±»å‹">å…¶ä»–çš„æ³›å‹ç±»å‹</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// æ³›å‹ç»“æ„ä½“
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewStruct</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ³›å‹æ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">IPrintData</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float64</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Print</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// æ³›å‹Channel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewChan</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="kd">chan</span> <span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç±»å‹å½¢å‚çš„åµŒå¥—">ç±»å‹å½¢å‚çš„åµŒå¥—</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">WowStruct</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span><span class="p">,</span> <span class="nx">S</span> <span class="p">[]</span><span class="nx">T</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span> <span class="nx">S</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MinValue</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MaxValue</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s</span> <span class="nx">WowStruct</span><span class="p">[</span><span class="kt">int</span><span class="p">,</span> <span class="p">[]</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span><span class="p">:</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MinValue</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">MaxValue</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="å¸¸è§è¯­æ³•é”™è¯¯">å¸¸è§è¯­æ³•é”™è¯¯</h3>
<ol>
<li>
<p>å®šä¹‰æ³›å‹æ—¶ï¼Œ**åŸºç¡€ç±»å‹ä¸èƒ½åªæœ‰ç±»å‹å½¢å‚ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// error, ç±»å‹å½¢å‚ä¸èƒ½å•ç‹¬ä½¿ç”¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">CommonType</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å½“ç±»å‹çº¦æŸçš„ä¸€äº›å†™æ³•ä¼šè¢«ç¼–è¯‘å™¨è¯¯è®¤ä¸ºæ—¶è¡¨è¾¾å¼æ—¶ä¼šæŠ¥é”™ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// error, T *int ä¼šè¢«ç¼–è¯‘å™¨è¯¯è®¤ä¸ºæ˜¯è¡¨è¾¾å¼ T ä¹˜ä»¥ intï¼Œè€Œä¸æ˜¯ int æŒ‡é’ˆ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="o">*</span><span class="kt">int</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// error, è¿™é‡Œçš„ * ä¼šè¢«è®¤ä¸ºæ˜¯ä¹˜æ³•ç¬¦å·ï¼Œ| ä¼šè¢«è®¤ä¸ºæ—¶æŒ‰ä½æˆ–
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="o">*</span><span class="kt">int</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nf">T</span> <span class="p">(</span><span class="kt">int</span><span class="p">)]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚ä½•é¿å…è¿™ç§é”™è¯¯å‘¢ï¼Ÿå¯ä»¥ç»™ç±»å‹çº¦æŸç”¨ <code>interface{}</code> åŒ…ä¸Š æˆ–è€…åŠ ä¸Šé€—å·æ¶ˆé™¤æ­§ä¹‰ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="kd">interface</span><span class="p">{</span><span class="o">*</span><span class="kt">int</span><span class="p">}]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="kd">interface</span><span class="p">{</span><span class="o">*</span><span class="kt">int</span><span class="p">|</span><span class="o">*</span><span class="kt">float64</span><span class="p">}]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// ç±»å‹çº¦æŸåªæœ‰ä¸€ä¸ªç±»å‹ï¼Œå¯ä»¥æ·»åŠ ä¸€ä¸ªé€—å·æ¶ˆé™¤æ­§ä¹‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="o">*</span><span class="kt">int</span><span class="p">,]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼Œç±»å‹çº¦æŸæœ‰å¤šä¸ªæ—¶åŠ é€—å·æ— æ³•æ¶ˆé™¤æ­§ä¹‰
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewType</span><span class="p">[</span><span class="nx">T</span> <span class="o">*</span><span class="kt">int</span> <span class="p">|</span> <span class="o">*</span><span class="kt">float64</span><span class="p">,]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h3 id="ç‰¹æ®Šçš„æ³›å‹ç±»å‹">ç‰¹æ®Šçš„æ³›å‹ç±»å‹</h3>
<p>è¿™é‡Œè®¨è®ºä¸€ä¸‹æ¯”è¾ƒç‰¹æ®Šçš„æ³›å‹ç±»å‹ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Foo</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="nx">Foo</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="mi">123</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="nx">Foo</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="p">=</span> <span class="mi">123</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">a</span> <span class="nx">Foo</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="s">&#34;bar&#34;</span> <span class="c1">// errorï¼Œå› ä¸º&#34;hello&#34;ä¸èƒ½èµ‹å€¼ç»™åº•å±‚ç±»å‹int
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™é‡Œè™½ç„¶ä½¿ç”¨äº†ç±»å‹å½¢å‚ï¼Œä½†æ˜¯å®ƒçš„åº•å±‚ç±»å‹è¿˜æ˜¯ int ç±»å‹ï¼Œæ— è®ºä¼ å…¥ä»€ä¹ˆç±»å‹å®å‚ï¼Œå®ä¾‹åŒ–ä¹‹åéƒ½æ˜¯ int ç±»å‹</p>
<h3 id="æ³›å‹ç±»å‹çš„å¥—å¨ƒ">æ³›å‹ç±»å‹çš„å¥—å¨ƒ</h3>
<p>æ³›å‹ç±»å‹å¯ä»¥è¿›è¡Œå¥—å¨ƒï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// å…ˆå®šä¹‰ä¸€ä¸ª Slice[T]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å†å®šä¹‰ä¸€ä¸ªåŸºäº Slice[T] çš„æ³›å‹ç±»å‹ FloatSlice[T]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">FloatSlice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// error, æ³›å‹ç±»å‹ Slice[T] çš„ç±»å‹çº¦æŸä¸åŒ…å« uint, uint8
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">UintSlice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span><span class="p">]</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®šä¹‰ä¸€ä¸ªåŸºäº Slice[T] çš„ IntAndStringSlice[T]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">IntAndStringSlice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// åœ¨ map ä¸­åµŒå¥—æ³›å‹ç±»å‹ Slice[T]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">FooMap</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FooMap</span><span class="p">[</span><span class="nx">T</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">|</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">string</span><span class="p">]]</span> <span class="kd">map</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç±»å‹çº¦æŸçš„ä¸¤ç§å†™æ³•">ç±»å‹çº¦æŸçš„ä¸¤ç§å†™æ³•</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FooStruct</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">BarStruct</span><span class="p">[</span><span class="nx">T</span> <span class="p">[]</span><span class="kt">int</span> <span class="p">|</span> <span class="p">[]</span><span class="kt">string</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Name</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Data</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>åŒ¿åç»“æ„ä½“ä¸æ”¯æŒæ³›å‹</p>
<p>è¿™ä½¿å¾—åœ¨è¿›è¡Œå•å…ƒæµ‹è¯•æ—¶ï¼Œä¸ºæ³›å‹åšå•å…ƒæµ‹è¯•å˜å¾—å¾ˆéº»çƒ¦</p>
</blockquote>
<h2 id="æ³›å‹-receiver">æ³›å‹ Receiver</h2>
<p>Go æ³›å‹æ”¯æŒç»™æ³›å‹ç±»å‹æ·»åŠ æ–¹æ³•ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">string</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span><span class="p">])</span> <span class="nf">Sum</span><span class="p">()</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">var</span> <span class="nx">sum</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="nx">_</span><span class="p">,</span> <span class="nx">value</span> <span class="o">:=</span> <span class="k">range</span> <span class="nx">s</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">sum</span> <span class="o">+=</span> <span class="nx">value</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">sum</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ä¾‹åŒ–</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="p">[]</span><span class="kt">int</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;%v\n&#34;</span><span class="p">,</span> <span class="nx">s</span><span class="p">.</span><span class="nf">Sum</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>é€šè¿‡æ³›å‹ Receiverï¼Œæ³›å‹çš„å®ç”¨æ€§å¾—åˆ°äº†å¾ˆå¤§çš„æ‰©å±•ï¼Œæˆ‘ä»¬å¯ä»¥å¾ˆç®€å•çš„åˆ›å»ºé€šç”¨çš„æ•°æ®ç»“æ„ï¼Œåœ¨è¿™ä¹‹å‰æˆ‘ä»¬å¦‚æœæƒ³è¦å®ç°é€šç”¨çš„æ•°æ®ç»“æ„ï¼ˆå †ã€æ ˆã€é“¾è¡¨ã€é˜Ÿåˆ—ï¼‰åªèƒ½ä½¿ç”¨ä¸¤ç§æ–¹æ³•</p>
<ul>
<li>æ¯ç§ç±»å‹æŒ¨ä¸ªå®ç°ï¼ˆå•°å—¦ã€éº»çƒ¦ï¼‰</li>
<li>æ¥å£ + åå°„ï¼ˆéº»çƒ¦ã€éš¾ç†è§£ï¼‰</li>
</ul>
<h3 id="åŸºäºæ³›å‹çš„é˜Ÿåˆ—">åŸºäºæ³›å‹çš„é˜Ÿåˆ—</h3>
<p>æˆ‘ä»¬ä¸å¿…åƒä¹‹å‰é‚£æ ·ä¸ºæ¯ä¸ªç±»å‹éƒ½å®ç°ä¸€ä¸ªé˜Ÿåˆ—ï¼Œç›´æ¥ä½¿ç”¨æ³›å‹ Receiver ä¾¿å¯ç®€å•çš„å®ç°ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Queue</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">elements</span> <span class="p">[]</span><span class="nx">T</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å°†æ•°æ®åŠ å…¥é˜Ÿåˆ—
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">q</span> <span class="o">*</span><span class="nx">Queue</span><span class="p">[</span><span class="nx">T</span><span class="p">])</span> <span class="nf">Put</span><span class="p">(</span><span class="nx">value</span> <span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">q</span><span class="p">.</span><span class="nx">elements</span> <span class="p">=</span> <span class="nb">append</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å°†æ•°æ®ä»é˜Ÿåˆ—å–å‡º
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">q</span> <span class="o">*</span><span class="nx">Queue</span><span class="p">[</span><span class="nx">T</span><span class="p">])</span> <span class="nf">Pop</span><span class="p">()</span> <span class="p">(</span><span class="nx">T</span><span class="p">,</span> <span class="kt">bool</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kd">var</span> <span class="nx">value</span> <span class="nx">T</span>
</span></span><span class="line"><span class="cl">	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">		<span class="k">return</span> <span class="nx">value</span><span class="p">,</span> <span class="kc">true</span>
</span></span><span class="line"><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">	<span class="nx">value</span> <span class="p">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">	<span class="nx">q</span><span class="p">.</span><span class="nx">elements</span> <span class="p">=</span> <span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nx">value</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// é˜Ÿåˆ—å¤§å°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span> <span class="p">(</span><span class="nx">q</span> <span class="o">*</span><span class="nx">Queue</span><span class="p">[</span><span class="nx">T</span><span class="p">])</span> <span class="nf">Size</span><span class="p">()</span> <span class="kt">int</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="nx">q</span><span class="p">.</span><span class="nx">elements</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">q1</span> <span class="nx">Queue</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">q1</span><span class="p">.</span><span class="nf">Put</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">q1</span><span class="p">.</span><span class="nf">Put</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">q1</span><span class="p">.</span><span class="nf">Pop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">q1</span> <span class="nx">Queue</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">q2</span><span class="p">.</span><span class="nf">Put</span><span class="p">(</span><span class="s">&#34;A&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">q2</span><span class="p">.</span><span class="nf">Pur</span><span class="p">(</span><span class="s">&#34;B&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">q2</span><span class="p">.</span><span class="nf">Pop</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="nx">q2</span><span class="p">.</span><span class="nf">Pop</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>æ³›å‹ä¸èƒ½åƒç©ºæ¥å£ä¸€æ ·è¿›è¡Œç±»å‹çš„åŠ¨æ€åˆ¤æ–­ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ä½¿ç”¨åå°„è¿›è¡Œç±»å‹çš„åŠ¨æ€åˆ¤æ–­<del>è¿™å¾ˆæ¶å¿ƒğŸ¤¢</del></p>
</blockquote>
<h2 id="æ³›å‹å‡½æ•°">æ³›å‹å‡½æ•°</h2>
<p>æ³›å‹å‡½æ•°çš„å†™æ³•å¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nx">Add</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å®ƒå’Œæ™®é€šå‡½æ•°çš„åŒºåˆ«å°±æ˜¯åœ¨å‡½æ•°ååå¸¦äº†ç±»å‹å½¢å‚ï¼Œæ³›å‹å‡½æ•°å¯ä»¥æ˜¾å¼çš„ä¼ å…¥ç±»å‹å®å‚ä¹Ÿå¯ä»¥ä¸ä¼ å…¥ç±»å‹å®å‚ï¼Œç¼–è¯‘å™¨å¯ä»¥è‡ªåŠ¨æ¨æ–­ï¼›ä¸€èˆ¬æƒ…å†µä¸‹ç¼–è¯‘å™¨ä¼šå‘Šè¯‰ä½ ä¼ å…¥ç±»å‹å®å‚æ˜¯æ²¡å¿…è¦çš„</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">value</span> <span class="p">=</span> <span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// ç¼–è¯‘å™¨æ¨æ–­å‡ºç±»å‹å®å‚ä¸º int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">value</span> <span class="p">=</span> <span class="nx">Add</span><span class="p">[</span><span class="kt">int</span><span class="p">](</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span> <span class="c1">// æ˜¾å¼çš„ä¼ å…¥ç±»å‹å®å‚ int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">value</span> <span class="p">=</span> <span class="nx">Add</span><span class="p">[</span><span class="kt">float32</span><span class="p">](</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span> <span class="c1">// æ˜¾å¼çš„ä¼ å…¥ç±»å‹å®å‚ float32
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>åŒ¿åå‡½æ•°</strong>ä¸æ”¯æŒæ³›å‹ï¼Œä½†æ˜¯åŒ¿åå‡½æ•°å¯ä»¥ä½¿ç”¨åˆ«å¤„å®šä¹‰å¥½çš„ç±»å‹å®å‚ï¼Œå¦‚ä¸‹ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">func</span> <span class="nx">FooFunc</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">T</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">fn2</span> <span class="o">:=</span> <span class="kd">func</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">j</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="nx">i</span><span class="o">*</span><span class="mi">2</span> <span class="o">+</span> <span class="nx">j</span> <span class="o">*</span><span class="mi">2</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">fn2</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ³›å‹æ–¹æ³•">æ³›å‹æ–¹æ³•ï¼Ÿ</h3>
<p>å‡½æ•°éƒ½æ”¯æŒæ³›å‹äº†ï¼Œè€Œä¸”å«æœ‰æ³›å‹ Receiverï¼Œé‚£æ–¹æ³•å°±ä¸€å®šæ”¯æŒæ³›å‹å§ï¼Ÿå¾ˆé—æ†¾ï¼Œç›®å‰Goå®˜æ–¹å¹¶ä¸æ”¯æŒæ³›å‹æ–¹æ³•ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// error, ä¸æ”¯æŒæ³›å‹æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">func</span><span class="p">(</span><span class="nx">receiver</span> <span class="nx">A</span><span class="p">)</span> <span class="nx">Add</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">](</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯å› ä¸º receiver æ”¯æŒæ³›å‹ï¼Œæ‰€ä»¥å¯ä»¥æ›²çº¿æ•‘å›½ä¸€ä¸‹ï¼Œé€šè¿‡ receiver ä½¿ç”¨ç±»å‹å½¢å‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span><span class="p">]</span> <span class="kd">struct</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">receiver</span> <span class="nx">A</span><span class="p">[</span><span class="nx">T</span><span class="p">])</span> <span class="nf">Add</span><span class="p">(</span><span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">T</span><span class="p">)</span> <span class="nx">T</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nx">a</span> <span class="o">+</span> <span class="nx">b</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span> <span class="nx">A</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">a</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">b</span> <span class="nx">A</span><span class="p">[</span><span class="kt">float64</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="nx">b</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h2 id="å°ç»“">å°ç»“</h2>
<p>Go çš„æ³›å‹ç›®å‰å¯ä»¥ä½¿ç”¨åœ¨å¦‚ä¸‹ä¸‰ä¸ªåœ°æ–¹ï¼š</p>
<ul>
<li>æ³›å‹ç±»å‹ &ndash; ç±»å‹å®šä¹‰ä¸­å¸¦ç±»å‹å½¢å‚çš„ç±»å‹</li>
<li>æ³›å‹ Receiver &ndash; æ³›å‹ç±»å‹çš„ Receiver</li>
<li>æ³›å‹å‡½æ•° &ndash; å¸¦ç±»å‹å½¢å‚çš„å‡½æ•°</li>
</ul>
<h2 id="å˜å¤æ‚çš„æ¥å£">å˜å¤æ‚çš„æ¥å£</h2>
<p>æœ‰æ—¶å€™ä½¿ç”¨æ³›å‹è¿›è¡Œç¼–ç¨‹çš„æ—¶å€™ï¼Œå¯èƒ½ä¼šä¹¦å†™ä¸€ä¸ªå¾ˆé•¿é•¿é•¿çš„ç±»å‹çº¦æŸ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="kt">int</span> <span class="p">|</span> <span class="kt">int8</span><span class="p">|</span> <span class="kt">int16</span> <span class="p">|</span> <span class="kt">int32</span> <span class="p">|</span> <span class="kt">int64</span> <span class="p">|</span> <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span> <span class="p">|</span> <span class="kt">uint16</span><span class="p">|</span> <span class="kt">uint32</span> <span class="p">|</span> <span class="kt">uint64</span><span class="p">]</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½¿å¾—å¯è¯»æ€§å¤§å¤§çš„ä¸‹é™ï¼Œè¿™å¯æ˜¯æ— æ³•å¿å—çš„ã€‚è€Œ Go æ”¯æŒå°†è¿™äº›ç±»å‹è¿›è¡ŒæŠ½è±¡ï¼Œå°†å…¶æŠ½è±¡ä¸ºä¸€ä¸ªæ¥å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">IntUint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="kt">int</span> <span class="p">|</span> <span class="kt">int8</span> <span class="p">|</span> <span class="kt">int16</span> <span class="p">|</span> <span class="kt">int32</span> <span class="p">|</span> <span class="kt">int64</span> <span class="p">|</span> <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span> <span class="p">|</span> <span class="kt">uint16</span> <span class="p">|</span> <span class="kt">uint32</span> <span class="p">|</span> <span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">IntUint</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ®µä»£ç å§ç±»å‹çº¦æŸå•ç‹¬æ‹¿å‡ºæ¥ï¼Œå†™å…¥äº†æ¥å£ç±»å‹ IntUintä¸­ï¼Œä½†æ˜¯å¯ç»´æŠ¤æ€§è¿˜æ˜¯æœ‰ç‚¹ä½ï¼Œè¿™æ˜¯æˆ‘ä»¬å¯ä»¥å°†æ¥å£å’Œæ¥å£ã€æ¥å£å’Œæ™®åŒç±»å‹ä¹‹é—´é€šè¿‡ <code>|</code> è¿›è¡Œç»„åˆï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Int</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="p">|</span> <span class="kt">int8</span> <span class="p">|</span> <span class="kt">int16</span> <span class="p">|</span> <span class="kt">int32</span> <span class="p">|</span> <span class="kt">int64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Uint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span> <span class="p">|</span> <span class="kt">uint16</span> <span class="p">|</span> <span class="kt">uint32</span> <span class="p">|</span> <span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">Int</span> <span class="p">|</span> <span class="nx">Uint</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœ¨æ¥å£ä¸­ä¹Ÿèƒ½ç›´æ¥ç»„åˆå…¶ä»–æ¥å£ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">SliceElement</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Int</span> <span class="p">|</span> <span class="nx">Uint</span> <span class="p">|</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">SliceElement</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æŒ‡å®šåº•å±‚ç±»å‹-">æŒ‡å®šåº•å±‚ç±»å‹ï¼š ~</h3>
<p>ä¸Šé¢å®šä¹‰çš„ <code>Slice[T]</code> è™½ç„¶å¯ä»¥å¢åŠ å¯ç»´æŠ¤æ€§ï¼Œä½†æ˜¯æœ‰ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å®ƒä¸èƒ½ä½¿ç”¨ NewType æ¥ä½œä¸ºç±»å‹å®å‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s1</span> <span class="nx">Slice</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s2</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">NewInt</span><span class="p">]</span> <span class="c1">// error, NewInt çš„åº•å±‚ç±»å‹æ˜¯ int ä½†æ˜¯ä»–ä¸æ˜¯ int ç±»å‹ï¼Œä¸ç¬¦åˆ Slice[T] çš„ç±»å‹çº¦æŸ
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ç§é—®é¢˜è¯¥å¦‚ä½•è§£å†³å‘¢ï¼Œè´´å¿ƒçš„å®˜æ–¹ç»™äº†æˆ‘ä»¬ä¸€ä¸ªæ–°çš„ç¬¦å· <code>~</code>ï¼Œåœ¨ç±»å‹çº¦æŸä¸­ä½¿ç”¨ç±»å‹ <code>~int</code>è¿™ç§å†™æ³•ï¼Œå°±ä»£è¡¨ä»»ä½•åº•å±‚ç±»å‹ä¸º int ç±»å‹çš„ NewType éƒ½å¯ä»¥ä½œä¸º Slice[T] çš„ç±»å‹å®å‚ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Int</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">ï½</span><span class="kt">int</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">int8</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">int16</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">int32</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">int64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Uint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">ï½</span><span class="kt">uint</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">uint8</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">uint16</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">uint32</span> <span class="p">|</span> <span class="err">ï½</span><span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">Int</span> <span class="p">|</span> <span class="nx">Uint</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FooInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s1</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">FooInt</span><span class="p">]</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">BarInt</span> <span class="nx">FooInt</span>
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">s2</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">BarInt</span><span class="p">]</span> <span class="c1">// right
</span></span></span></code></pre></td></tr></table>
</div>
</div><p><strong>é™åˆ¶</strong>ï¼šä½¿ç”¨ <code>~</code> æœ‰ä¸€å®šçš„é™åˆ¶</p>
<ul>
<li><code>~</code> åé¢ä¸èƒ½ä¸ºæ¥å£</li>
<li><code>~</code> åé¢çš„ç±»å‹å¿…é¡»ä¸ºåŸºæœ¬ç±»å‹ï¼Œä¸èƒ½ä¸º NewType</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Int</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="p">[]</span><span class="kt">byte</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="err">~</span><span class="nx">NewInt</span> <span class="c1">// errorï¼Œ~ åç±»å‹å¿…é¡»ä¸ºæ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="err">~</span><span class="kt">error</span> <span class="c1">// errorï¼Œ~ åçš„ç±»å‹ä¸èƒ½ä¸ºæ¥å£
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ä»æ–¹æ³•é›†method-typeåˆ°ç±»å‹é›†type-set">ä»æ–¹æ³•é›†ï¼ˆMethod Typeï¼‰åˆ°ç±»å‹é›†ï¼ˆType Setï¼‰</h3>
<p>ä¸Šé¢çš„å†™æ³•åœ¨1.18ç‰ˆæœ¬ä¹‹å‰æ˜¯æ²¡æœ‰çš„ï¼Œå› ä¸ºåœ¨1.18ä¹‹å‰å®˜æ–¹å¯¹<code>æ¥å£ï¼ˆinterfaceï¼‰</code>çš„å®šä¹‰ä¸ºï¼šæ¥å£æ˜¯ä¸€ä¸ªæ–¹æ³•é›†ï¼ˆmethod setï¼‰</p>
<blockquote>
<p>An interface type specifies a <strong>method set</strong> called it interface</p>
</blockquote>
<p>å°±å¦‚åŒä¸‹é¢è¿™æ®µä»£ç ä¸€æ ·ï¼Œ<code>ReadWrite</code>æ¥å£å®šä¹‰äº†ä¸€ä¸ªæ¥å£ï¼ˆæ–¹æ³•é›†ï¼‰ï¼Œè¿™ä¸ªé›†åˆåŒ…å«äº†<code>Read()</code>å’Œ<code>Write()</code>ä¸¤ä¸ªæ–¹æ³•ã€‚æ‰€æœ‰åŒæ—¶å®ç°äº†è¿™ä¸¤ç§æ–¹æ³•çš„ç±»å‹å°±ä¼šè¢«è§†ä¸ºå®ç°äº†è¿™ä¸€æ¥å£ï¼ˆé¸­å­å‹åˆ«ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ReadWrite</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯å¦‚æœæ¢ä¸ªè§’åº¦æ¥é‡æ–°æ€è€ƒè¿™ä¸ªæ¥å£çš„è¯ï¼Œä¼šå‘ç°æ¥å£çš„å®šä¹‰å®é™…ä¸Šè¿˜èƒ½ç†è§£ä¸ºï¼š</p>
<blockquote>
<p>å¯ä»¥æŠŠ<code>ReadWrite</code> æ¥å£çœ‹æˆä»£è¡¨äº†ä¸€ä¸ªç±»å‹çš„é›†åˆï¼Œæ‰€æœ‰å®ç°äº†<code>Read()</code> å’Œ <code>Write()</code> è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç±»å‹éƒ½åœ¨æ¥å£ä»£è¡¨çš„ç±»å‹é›†åˆä¸­</p>
</blockquote>
<p>æ¢ä¸ªè§’åº¦åï¼Œæ¥å£çš„å®šä¹‰å°±ä»<strong>æ–¹æ³•é›†</strong>å˜ä¸ºäº†<strong>ç±»å‹é›†</strong>ã€‚è€Œ Go 1.18 ä¹Ÿå°†æ¥å£çš„å®šä¹‰æ›´æ”¹ä¸ºäº†ï¼šæ¥å£æ˜¯ä¸€ä¸ªç±»å‹é›†åˆï¼ˆtype setï¼‰</p>
<blockquote>
<p>An interface type defines a <strong>type set</strong></p>
</blockquote>
<h3 id="æ¥å£å®šä¹‰çš„å˜åŒ–">æ¥å£å®šä¹‰çš„å˜åŒ–</h3>
<p>ä» Go 1.18 å¼€å§‹ï¼Œå½“æ»¡è¶³å¦‚ä¸‹æ¡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥è¯´<strong>ç±»å‹ T å®ç°äº†æ¥å£ Iï¼ˆtype T implements interface Iï¼‰</strong></p>
<ul>
<li>T ä¸æ˜¯æ¥å£æ—¶ï¼šç±»å‹ T æ˜¯æ¥å£ I ä»£è¡¨çš„ç±»å‹é›†ä¸­çš„ä¸€ä¸ªæˆå‘˜ï¼ˆT is an element of the type set of Iï¼‰</li>
<li>T æ˜¯æ¥å£æ—¶ï¼šT æ¥å£ä»£è¡¨çš„ç±»å‹é›†æ˜¯ I ä»£è¡¨çš„ç±»å‹é›†çš„å­é›†ï¼ˆType set of T is subset of the type of Iï¼‰</li>
</ul>
<h3 id="ç±»å‹çš„å¹¶é›†">ç±»å‹çš„å¹¶é›†</h3>
<p>ä¹‹å‰ä¸€ç›´æ˜¯ç”¨çš„ <code>|</code> ç¬¦å·å°±æ˜¯æ±‚ç±»å‹çš„å¹¶é›†ï¼ˆunionï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">IntUint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="p">|</span> <span class="kt">int8</span><span class="p">|</span> <span class="kt">int16</span> <span class="p">|</span> <span class="kt">int32</span> <span class="p">|</span> <span class="kt">int64</span> <span class="p">|</span> <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span> <span class="p">|</span> <span class="kt">uint16</span><span class="p">|</span> <span class="kt">uint32</span> <span class="p">|</span> <span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="ç±»å‹çš„äº¤é›†">ç±»å‹çš„äº¤é›†</h3>
<p>æ¥å£ï¼ˆç±»å‹é›†ï¼‰å¯ä»¥å†™å¤šè¡Œï¼Œå½“ä¸ºå¤šè¡Œæ—¶ï¼Œé‚£ä¹ˆä¼šå–ä»–ä»¬çš„äº¤é›†</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">AllInt</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="kt">int</span> <span class="p">|</span> <span class="kt">int8</span><span class="p">|</span> <span class="kt">int16</span> <span class="p">|</span> <span class="kt">int32</span> <span class="p">|</span> <span class="kt">int64</span> <span class="p">|</span> <span class="kt">uint</span> <span class="p">|</span> <span class="kt">uint8</span> <span class="p">|</span> <span class="kt">uint16</span><span class="p">|</span> <span class="kt">uint32</span> <span class="p">|</span> <span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Uint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">uint</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint8</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint16</span><span class="p">|</span> <span class="err">~</span><span class="kt">uint32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">A</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">AllInt</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Uint</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">B</span> <span class="kd">interface</span> <span class="p">{</span> <span class="c1">// æ¥å£ B å³ä¸º int
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nx">AllInt</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>æ¥å£ A ä»£è¡¨çš„å°±æ˜¯ <code>AllInt</code> å’Œ <code>Uint</code> çš„äº¤é›†ï¼Œå³ <code>uint | uint8 | uint16 | uint32 | uint64</code></p>
</li>
<li>
<p>æ¥å£ B ä»£è¡¨çš„å°±æ˜¯ <code>AllInt</code> å’Œ <code>~int</code> çš„äº¤é›†ï¼Œå³ <code>int</code></p>
</li>
</ul>
<p>ä¹Ÿå¯ä»¥è¿›è¡Œä¸€äº›æ”¾å±çš„å†™æ³•ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">C</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥å£<code>C</code> ä»£è¡¨çš„å°±æ˜¯ <code>int</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">D</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span>
</span></span><span class="line"><span class="cl">    <span class="kt">float32</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>æ¥å£ <code>D</code> ä»£è¡¨çš„å°±æ˜¯ä¸€ä¸ªç©ºé›†ï¼Œä¸åŒäºç©ºæ¥å£ <code>any</code>ï¼Œå®ƒæ˜¯æ— æ³•ä¼ é€’ç±»å‹å®å‚çš„</p>
<h3 id="ç©ºæ¥å£å’Œ-any">ç©ºæ¥å£å’Œ <code>any</code></h3>
<p>åœ¨ 1.18 ä¹‹åï¼Œç©ºæ¥å£ <code>interface{}</code> çš„å®šä¹‰ä¸ºï¼š</p>
<blockquote>
<p>ç©ºæ¥å£ä»£è¡¨äº†æ‰€æœ‰ç±»å‹çš„é›†åˆ</p>
</blockquote>
<p>æ‰€ä»¥å¯¹äº 1.18 åçš„ç©ºæ¥å£åº”ç†è§£ä¸ºï¼š</p>
<ul>
<li>è™½ç„¶ç©ºæ¥å£æ²¡æœ‰å†™å…¥ä»»ä½•ç±»å‹ï¼Œå³æ²¡æœ‰ç±»å‹çº¦æŸï¼Œä½†æ˜¯å®ƒä»£è¡¨äº†æ‰€æœ‰ç±»å‹çš„é›†åˆï¼Œè€Œéç©ºé›†</li>
<li>ç±»å‹çº¦æŸä¸­æŒ‡å®šäº†ç©ºæ¥å£çš„æ„æ€æ˜¯æŒ‡å®šäº†ä¸€ä¸ªåŒ…å«æ‰€æœ‰ç±»å‹çš„ç±»å‹é›†ï¼Œå¹¶ä¸æ˜¯ç±»å‹çº¦æŸé™å®šäº†åªèƒ½ä½¿ç”¨<strong>ç©ºæ¥å£</strong>æ¥åšç±»å‹</li>
</ul>
<p>å› ä¸ºç©ºæ¥å£åŒ…å«äº†æ‰€æœ‰çš„ç±»å‹ï¼Œæ‰€æœ‰ 1.18 æä¾›äº†ä¸€ä¸ªæ–°å…³é”®å­— <code>any</code> ï¼Œå®ƒæ˜¯ <code>interface{}</code> çš„å°è£…ï¼Œèƒ½ä½¿ä»£ç æ›´ç®€å•æ˜“æ‡‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Slice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">]</span> <span class="p">[]</span><span class="nx">T</span> <span class="c1">// ç­‰ä»·äº type Slice[T interface{}] []T
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæƒ³æŠŠ  1.18 ç‰ˆæœ¬ä¹‹å‰çš„é¡¹ç›®è¿ç§»åˆ° 1.18 ä¸­ï¼Œå¯ä»¥ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ˆè¿™æ˜¯å¯é€‰çš„ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">gofmt -w -r <span class="s1">&#39;interface{} -&gt; any&#39;</span> ./...
</span></span></code></pre></td></tr></table>
</div>
</div><blockquote>
<p>Go è¯­è¨€é¡¹ç›®ä¸­å°±æœ‰äººæ›¾æå‡ºè¿‡å°†æ‰€æœ‰çš„ interface{} æ›¿æ¢ä¸º any çš„ issueï¼Œä½†æ˜¯å› ä¸ºå½±å“è¿‡å¤§ä¸”æ— æ³•ç¡®å®šä¼šå‘ç”Ÿä»€ä¹ˆå¥‡å¥‡æ€ªæ€ªçš„ ğŸ›ï¼Œç†æ‰€å½“ç„¶çš„è¢«é©³å›äº†ã€‚æˆ‘è§‰å¾—æœ‰ä¸€éƒ¨åˆ†æ˜¯ç†ç”±æ˜¯ä¸ºäº†å…¼å®¹æ€§</p>
</blockquote>
<h3 id="å¯æ¯”è¾ƒcomparableå’Œå¯æ’åºordered">å¯æ¯”è¾ƒï¼ˆComparableï¼‰å’Œå¯æ’åºï¼ˆOrderedï¼‰</h3>
<p>åœ¨å†™æ³›å‹çš„æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨ç±»å‹çº¦æŸä¸­é™åˆ¶åªèƒ½æ¥å—èƒ½ != å’Œ == å¯¹æ¯”çš„ç±»å‹ï¼Œç±»ä¼¼äº Rust ä¸­çš„ <code>PartialEq Eq</code>traitï¼Œå¦‚ mapï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// errorï¼Œå› ä¸º map ä¸­é”®çš„ç±»å‹å¿…é¡»æ˜¯å¯æ¯”è¾ƒçš„
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewMap</span><span class="p">[</span><span class="nx">K</span> <span class="nx">any</span><span class="p">,</span> <span class="nx">V</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">map</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span><span class="nx">V</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™æ—¶è´´å¿ƒçš„å®˜æ–¹ç»™ä½ å†…ç½®äº†ä¸€ä¸ªæ¥å£ï¼Œå«åš <code>comparable</code>ï¼Œå®ƒä»£è¡¨äº†æ‰€æœ‰çš„å¯æ¯”è¾ƒç±»å‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewMap</span><span class="p">[</span><span class="nx">k</span> <span class="nx">comparable</span><span class="p">,</span> <span class="nx">V</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">map</span><span class="p">[</span><span class="nx">K</span><span class="p">]</span><span class="nx">V</span> <span class="c1">// right
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯è¿™é‡Œçš„å¯æ¯”è¾ƒæŒ‡çš„æ˜¯å¯ä»¥æ‰§è¡Œ <code>!=</code> å’Œ <code>==</code> æ“ä½œçš„ç±»å‹ï¼Œå¹¶ä¸ç¡®ä¿è¿™ä¸ªç±»å‹å¯ä»¥æ‰§è¡Œ <code>&gt; &lt; &gt;= &lt;=</code>ï¼Œå¦‚ä¸‹</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">FooStruct</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">a</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">a</span><span class="p">,</span> <span class="nx">b</span> <span class="nx">FooStruct</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">a</span> <span class="o">==</span> <span class="nx">b</span> <span class="c1">// rightï¼Œç»“æ„ä½“å¯ä»¥ä½¿ç”¨ == å’Œ != è¿›è¡Œæ¯”è¾ƒ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">a</span> <span class="o">!=</span> <span class="nx">b</span> <span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl"><span class="nx">a</span> <span class="p">&gt;</span> <span class="nx">b</span> <span class="c1">// errorï¼Œç»“æ„ä½“ä¸æ”¯æŒæ¯”è¾ƒå¤§å°
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å¦‚æœæƒ³æ¯”è¾ƒå¤§å°ï¼Œå®ç°ç±»ä¼¼äº Rust ä¸­çš„ <code>PartialOrd Ord</code> traitï¼Œå®˜æ–¹å¹¶æ²¡æœ‰æä¾›å…³é”®å­—ï¼Œæˆ‘ä»¬åªèƒ½è‡ªå·±æ¥å®ç°ã€‚</p>
<p>æ¯”å¦‚æˆ‘ä»¬å¯ä»¥å‚è€ƒå®˜æ–¹çš„<code>golang.org/x/exp/constraints</code>å¦‚ä½•å®šä¹‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// Ordered ä»£è¡¨æ‰€æœ‰å¯ä»¥è¿›è¡Œæ¯”è¾ƒçš„ç±»å‹
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">Ordered</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Integer</span> <span class="p">|</span> <span class="nx">Float</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Integer</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Signed</span> <span class="p">|</span> <span class="nx">Unsigned</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Singed</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">int8</span> <span class="p">|</span> <span class="err">~</span><span class="kt">int16</span><span class="p">|</span> <span class="err">~</span><span class="kt">int32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">int64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Unsigned</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">uint</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint8</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint16</span><span class="p">|</span> <span class="err">~</span><span class="kt">uint32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Float</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">float32</span> <span class="p">|</span> <span class="kt">float64</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¥å£çš„ä¸¤ç§ç±»å‹">æ¥å£çš„ä¸¤ç§ç±»å‹</h3>
<p>å¦‚ä¸‹çš„ä¾‹å­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ReadWriter</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="err">~</span><span class="p">[]</span><span class="kt">rune</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>è¯¥å¦‚ä½•ç†è§£è¿™ä¸ªä¾‹å­ï¼Ÿç”¨ç±»å‹é›†çš„æ¦‚å¿µå°±èƒ½è½»æ¾çš„ç†è§£è¿™ä¸ªæ¥å£çš„æ„æ€</p>
<blockquote>
<p>æ¥å£ç±»å‹ ReadWriter ä»£è¡¨äº†ä¸€ä¸ªç±»å‹é›†åˆï¼Œæ‰€æœ‰ä»¥ string æˆ– []rune ä¸ºåº•å±‚ç±»å‹ï¼Œå¹¶å®ç°äº† Read() å’Œ Write() è¿™ä¸¤ä¸ªæ–¹æ³•çš„ç±»å‹éƒ½åœ¨ ReadWriter ä»£è¡¨çš„ç±»å‹é›†ä¸­</p>
</blockquote>
<p>ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œ<code>StringReadwriter</code>å­˜åœ¨äº<code>ReadWriter</code>ä»£è¡¨çš„ç±»å‹é›†ä¸­ï¼Œ<code>BytesReadWriter</code>å¹¶ä¸å±äº<code>ReadWriter</code>ä»£è¡¨çš„ç±»å‹é›†åˆï¼Œå› ä¸ºå®ƒçš„åº•å±‚ç±»å‹ä¸º<code>[]byte</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">StringReadWriter</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">StringReadWriter</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">s</span> <span class="nx">StringReadWriter</span><span class="p">)</span> <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">BytesReadWriter</span> <span class="p">[]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="nx">BytesReadWriter</span><span class="p">)</span> <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">b</span> <span class="nx">BytesReadWriter</span><span class="p">)</span> <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="mi">0</span><span class="p">,</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>åœï¼ï¼ï¼è¿™æ¥å£å˜å¾—å¤ªå¤æ‚äº†å§ï¼Œæˆ‘å®šä¹‰ä¸€ä¸ª ReadWriterç±»å‹çš„æ¥å£å˜é‡ï¼Œç„¶åæ¥å£å˜é‡èµ‹å€¼çš„æ—¶å€™ä¸ä»…è¦è€ƒè™‘åˆ°æ–¹æ³•çš„å®ç°ï¼Œè¿˜æœ‰è€ƒè™‘åº•å±‚ç±»å‹ï¼Œè¿™ä¹Ÿå¤ªğŸŒ¿äº†å§ã€‚è¿™æ—¶è´´å¿ƒçš„å®˜æ–¹ä¸ºäº†ä¿æŒ Go çš„å…¼å®¹æ€§ï¼Œ1.18 ä¹‹åå°†æ¥å£åˆ†ä¸ºä¸¤ç§ç±»å‹ï¼š</p>
<ul>
<li><strong>åŸºæœ¬æ¥å£ï¼ˆBasic interfaceï¼‰</strong></li>
<li><strong>ä¸€èˆ¬æ¥å£ï¼ˆGeneral interfaceï¼‰</strong></li>
</ul>
<h4 id="åŸºæœ¬æ¥å£">åŸºæœ¬æ¥å£</h4>
<p>æ¥å£çš„å®šä¹‰åªæœ‰æ–¹æ³•çš„è¯ï¼Œé‚£ä¹ˆè¿™ç§æ¥å£è¢«ç§°ä¸º<strong>åŸºæœ¬æ¥å£ï¼ˆBasic interfaceï¼‰</strong>ã€‚è¿™ç§æ¥å£å°±æ˜¯ 1.18 ä¹‹å‰çš„æ¥å£ï¼Œç”¨æ³•ä¹Ÿå’Œä¹‹å‰ä¸€è‡´ã€‚åŸºæœ¬æ¥å£ä¸€èˆ¬ç”¨äºå¦‚ä¸‹å‡ ä¸ªåœ°æ–¹ï¼š</p>
<ul>
<li>
<p>æœ€å¸¸ç”¨çš„ï¼Œï¼Œå®šä¹‰æ¥å£å˜é‡èµ‹å€¼</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewError</span> <span class="kd">interface</span> <span class="p">{</span> <span class="c1">// åŸºæœ¬æ¥å£ï¼Œåªæœ‰æ–¹æ³•
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nf">Error</span><span class="p">()</span> <span class="kt">string</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">err</span> <span class="nx">NewError</span> <span class="p">=</span> <span class="nx">fmt</span><span class="p">.</span><span class="nf">Errorf</span><span class="p">(</span><span class="s">&#34;new error&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>åŸºæœ¬æ¥å£ä¹Ÿä»£è¡¨äº†ä¸€ä¸ªç±»å‹é›†ï¼Œæ‰€æœ‰ä¹Ÿå¯ä»¥ç”¨åœ¨ç±»å‹çº¦æŸä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// io.Reader å’Œ io.Writer éƒ½æ˜¯åŸºæœ¬æ¥å£ï¼Œä¹Ÿå¯ç”¨äºç±»å‹çº¦æŸä¸­
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">NewSlice</span><span class="p">[</span><span class="nx">T</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Reader</span> <span class="p">|</span> <span class="nx">io</span><span class="p">.</span><span class="nx">Writer</span><span class="p">]</span> <span class="p">[]</span><span class="nx">Slice</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ul>
<h4 id="ä¸€èˆ¬æ¥å£">ä¸€èˆ¬æ¥å£</h4>
<p>å¦‚æœæ¥å£ä¸­ä¸ä»…åªæœ‰æ–¹æ³•ï¼Œè¿˜æœ‰ç±»å‹çš„è¯æˆ–è€…åªæœ‰ç±»å‹ï¼Œè¿™ç§æ¥å£ä¸€èˆ¬è¢«ç§°ä¸º<strong>ä¸€èˆ¬æ¥å£ï¼ˆGeneral interfaceï¼‰</strong>ï¼Œå¦‚ä¸‹éƒ½æ˜¯ä¸€èˆ¬æ¥å£ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Uint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">uint8</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint16</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint64</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">ReadWriter</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="err">~</span><span class="p">[]</span><span class="kt">rune</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">Read</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Write</span><span class="p">(</span><span class="nx">p</span> <span class="p">[]</span><span class="kt">byte</span><span class="p">)</span> <span class="p">(</span><span class="nx">n</span> <span class="kt">int</span><span class="p">,</span> <span class="nx">err</span> <span class="kt">error</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><strong>ä¸€èˆ¬æ¥å£ç±»å‹ä¸èƒ½ç”¨æ¥å®šä¹‰å˜é‡ï¼Œåªèƒ½ç”¨äºæ³›å‹çš„ç±»å‹çº¦æŸä¸­</strong>ï¼Œæ‰€ä»¥å¦‚ä¸‹ç”¨æ³•æ˜¯é”™è¯¯çš„ï¼š</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Uint</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">uint8</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint16</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint32</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint64</span> <span class="p">|</span> <span class="err">~</span><span class="kt">uint</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">uintInf</span> <span class="nx">Uint</span> <span class="c1">// errorï¼ŒUintæ˜¯æ¥å£ï¼Œåªèƒ½ç”¨äºç±»å‹çº¦æŸï¼Œä¸å¾—ç”¨äºå˜é‡å®šä¹‰
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>è¿™ä¸€é™åˆ¶ä¿è¯äº†ä¸€èˆ¬æ¥å£çš„ä½¿ç”¨è¢«é™å®šåœ¨äº†æ³›å‹ä¸­ï¼Œä¸ä¼šå½±å“åˆ° 1.18 ä¹‹å‰çš„ä»£ç ï¼ˆå…¼å®¹æ€§ï¼‰ï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†ä¹¦å†™æ—¶çš„å¿ƒæ™ºè´Ÿæ‹…</p>
<h3 id="æ³›å‹æ¥å£">æ³›å‹æ¥å£</h3>
<p>æ‰€æœ‰ç±»å‹çš„å®šä¹‰éƒ½å¯ä»¥ä½¿ç”¨ç±»å‹å½¢å‚ï¼Œæ‰€ä»¥æ¥å£å®šä¹‰è‡ªç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨ç±»å‹å½¢å‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">DataProcessor</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">oriData</span> <span class="nx">T</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="nx">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">DataProcessor2</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kd">struct</span><span class="p">{</span> <span class="nx">Data</span> <span class="nx">any</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="nx">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>å› ä¸ºå¼•å…¥äº†ç±»å‹å½¢å‚ï¼Œè¿™ä¸¤ä¸ªæ¥å£éƒ½æ˜¯æ³›å‹æ¥å£ï¼Œ<strong>è€Œæ³›å‹ç±»å‹è¦ä½¿ç”¨çš„è¯å¿…é¡»ä¼ å…¥ç±»å‹å®å‚å®ä¾‹åŒ–æ‰æœ‰æ„ä¹‰</strong>ã€‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">DataProcessor</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// å®ä¾‹åŒ–åçš„æ¥å£å®šä¹‰ç›¸å½“äº
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">DataProcessor</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">oriData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>DataProcessor[string]</code>åªæœ‰æ–¹æ³•ï¼Œæ‰€ä»¥å®ƒæ˜¯å°±æ˜¯ä¸€ä¸ª<strong>åŸºæœ¬æ¥å£</strong>ï¼Œè¿™ä¸ªæ¥å£åŒ…å«äº†ä¸¤ä¸ªèƒ½å¤„ç†stringç±»å‹çš„æ–¹æ³•ã€‚å¦‚ä¸‹å®ç°äº†è¿™ä¸¤ä¸ªèƒ½å¤„ç†stringç±»å‹çš„æ–¹æ³•å°±ç®—å®ç°äº†è¿™ä¸ªæ¥å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">CSVProcessor</span> <span class="kd">struct</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">CSVProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">oriData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">fmt</span><span class="p">.</span><span class="nf">Printf</span><span class="p">(</span><span class="s">&#34;I get data %v&#34;</span><span class="p">,</span> <span class="nx">oriData</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;I am a CSV&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">c</span> <span class="nx">CSVProcessor</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">processor</span> <span class="nx">DataProcessor</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="p">=</span> <span class="nx">CSVProcessor</span><span class="p">{}</span>
</span></span><span class="line"><span class="cl"><span class="nx">processor</span><span class="p">.</span><span class="nf">Process</span><span class="p">(</span><span class="s">&#34;name,age\nbob,12\njack,30&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="nx">_</span> <span class="p">=</span> <span class="nx">processor</span><span class="p">.</span><span class="nf">Save</span><span class="p">(</span><span class="s">&#34;name,age\nbob,12\njack,30&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">var</span> <span class="nx">processor</span> <span class="nx">DataProcessor</span><span class="p">[</span><span class="kt">int</span><span class="p">]</span> <span class="p">=</span> <span class="nx">CSVProcessor</span><span class="p">{}</span> <span class="c1">// errorï¼ŒCSVProcessoræ²¡æœ‰å®ç°æ¥å£ DataProcessor[int]
</span></span></span></code></pre></td></tr></table>
</div>
</div><p>å†ç”¨åŒæ ·çš„æ–¹æ³•å®ä¾‹åŒ–ä¸€ä¸‹ DataProcessor2[T]</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="nx">DataProcessor2</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">DataProcessor2</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kd">struct</span><span class="p">{</span> <span class="nx">Data</span> <span class="nx">any</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">data</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="kt">string</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>DataProcessor2[string]</code>å› ä¸ºå¸¦æœ‰ç±»å‹å¹¶é›†ï¼Œæ‰€ä»¥å®ƒæ˜¯<strong>ä¸€èˆ¬æ¥å£</strong>ï¼Œæ‰€ä»¥å®ä¾‹åŒ–åä»£è¡¨çš„æ„æ€ä¸ºï¼š</p>
<ul>
<li>åªæœ‰å®ç°äº† <code>Process( data string) (newData string)</code> å’Œ <code>Save(data string) error</code> è¿™ä¸¤ä¸ªæ–¹æ³•ï¼Œå¹¶ä¸”ä»¥ <code>int</code> æˆ– <code>struct { Data any }</code>ä¸ºåº•å±‚ç±»å‹çš„ç±»å‹æ‰ç®—å®ç°äº†è¿™ä¸ªæ¥å£</li>
<li><strong>ä¸€èˆ¬æ¥å£</strong>ä¸èƒ½ç”¨äºå®šä¹‰å˜é‡åªèƒ½ç”¨äºç±»å‹çº¦æŸï¼Œæ‰€ä»¥æ¥å£<code>DataProcessor2[string]</code>åªæ˜¯å®šä¹‰äº†ä¸€ä¸ªç”¨äºç±»å‹çº¦æŸçš„ç±»å‹é›†</li>
</ul>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="c1">// XMLProcessor å®ç°äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œä½†æ˜¯å®ƒçš„åº•å±‚ç±»å‹æ˜¯ []byteï¼Œæ‰€ä»¥å®ƒå¹¶æ²¡æœ‰å®ç°æ¥å£ DataProcessor2[string]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">XMLProcessor</span> <span class="p">[]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="nx">XMLProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">oriData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;I am XML&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">x</span> <span class="nx">XMLProcessor</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// JsonProcessor å®ç°äº†ä¸¤ä¸ªæ–¹æ³•ï¼Œåº•å±‚ç±»å‹ä¹Ÿæ˜¯ struct { Data any }ï¼Œæ‰€ä»¥å®ç°äº† DataProcessor2[string]
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">JsonProcessor</span> <span class="kd">struct</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="nx">Data</span> <span class="nx">any</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">j</span> <span class="nx">JsonProcessor</span><span class="p">)</span> <span class="nf">Process</span><span class="p">(</span><span class="nx">oriData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="kt">string</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="s">&#34;I am Json&#34;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">func</span> <span class="p">(</span><span class="nx">j</span> <span class="nx">JsonProcessor</span><span class="p">)</span> <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="kt">string</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="kc">nil</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼Œä¸€èˆ¬æ¥å£ä¸èƒ½ç”¨äºåˆ›å»ºå˜é‡
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">var</span> <span class="nx">processor</span> <span class="nx">DataProcessor2</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// rightï¼Œå®ä¾‹åŒ–åçš„DataProcessor2å¯ä»¥ç”¨äºæ³›å‹çš„ç±»å‹çº¦æŸ
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">stringProcessor</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">DataProcessor2</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">PrintString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼Œå¸¦æ–¹æ³•çš„ä¸€èˆ¬æ¥å£ä¸èƒ½ä½œä¸ºç±»å‹å¹¶é›†çš„æˆå‘˜
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">StringProcessor</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">DataProcessor2</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span> <span class="p">|</span> <span class="nx">DataProcessor2</span><span class="p">[[]</span><span class="kt">byte</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">PrintString</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><h3 id="æ¥å£å®šä¹‰çš„ç§ç§é™åˆ¶">æ¥å£å®šä¹‰çš„ç§ç§é™åˆ¶</h3>
<p>åœ¨ 1.18 å¼•å…¥æ³›å‹åï¼Œå®šä¹‰ç±»å‹é›†ï¼ˆæ¥å£ï¼‰çš„æ—¶å€™å¢åŠ äº†éå¸¸å¤šçš„ååˆ†çç¢çš„é™åˆ¶è§„åˆ™ï¼Œæœ‰ä¸€äº›è§„åˆ™åœ¨ä¹‹å‰å·²ç»å†™è¿‡äº†ï¼Œä¸‹é¢è¿˜æœ‰ä¸€äº›è§„åˆ™ç»Ÿä¸€çš„ç½—åˆ—ä¸€ä¸‹</p>
<ol>
<li>
<p>ç”¨ <code>|</code> è¿æ¥å¤šä¸ªç±»å‹æ—¶ï¼Œç±»å‹ç›´æ¥ä¸èƒ½æœ‰ç›¸äº¤çš„éƒ¨åˆ†ï¼ˆå³ç±»å‹ç›´æ¥å¿…é¡»ä¸ºæ— äº¤é›†ï¼‰</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼ŒNewInt å’Œ ~int æœ‰ç›¸äº¤çš„éƒ¨åˆ†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="nx">NewInt</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ä½†æ˜¯ç›¸äº¤çš„ç±»å‹æ˜¯æ¥å£çš„è¯ï¼Œåˆ™ä¸å—è¿™ä¸€é™åˆ¶</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInt</span> <span class="kt">int</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="kd">interface</span> <span class="p">{</span> <span class="nx">NewInt</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">interface</span><span class="p">{</span> <span class="err">~</span><span class="kt">int</span> <span class="p">}</span> <span class="p">|</span> <span class="nx">NewInt</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// right
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">interface</span><span class="p">{</span> <span class="err">~</span><span class="kt">int</span> <span class="p">}</span> <span class="p">|</span> <span class="kd">interface</span> <span class="p">{</span> <span class="nx">Newint</span> <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>ç±»å‹å¹¶é›†ä¸­ä¸èƒ½æœ‰ç±»å‹å½¢å‚</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInf</span><span class="p">[</span><span class="nx">T</span> <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">float32</span> <span class="p">|</span> <span class="nx">T</span> <span class="c1">// errorï¼ŒT æ˜¯ç±»å‹å½¢å‚
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">NewInf</span><span class="p">[</span><span class="nx">T</span> <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">T</span> <span class="c1">// error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¥å£ä¸èƒ½ç›´æ¥æˆ–é—´æ¥çš„å¹¶å…¥è‡ªèº«</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Bad</span> <span class="c1">// errorï¼Œæ¥å£ä¸èƒ½å¹¶å…¥è‡ªèº«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad2</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Bad1</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad1</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Bad2</span> <span class="c1">// errorï¼Œæ¥å£ Bad1 é€šè¿‡ Bad2 é—´æ¥å¹¶å…¥äº†è‡ªèº«
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad3</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="nx">Bad3</span> <span class="c1">// error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>æ¥å£æˆå‘˜ä¸ªæ•°å¤§äºä¸€çš„æ—¶å€™ä¸èƒ½ç›´æ¥æˆ–é—´æ¥å¹¶å…¥ <code>comparable</code> æ¥å£</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Ok</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">comparable</span> <span class="c1">// rightï¼Œåªæœ‰ä¸€ä¸ªç±»å‹çº¦æŸæ—¶å¯ä»¥ä½¿ç”¨ comparable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad1</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">[]</span><span class="kt">int</span> <span class="p">|</span> <span class="nx">comparabel</span> <span class="c1">//errorï¼Œç›´æ¥å¹¶å…¥ comparabel
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">CmpInf</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">comparable</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad2</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">chan</span> <span class="kt">int</span> <span class="p">|</span> <span class="nx">CmpInf</span> <span class="c1">// errorï¼Œé—´æ¥å¹¶å…¥ comparable
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">Bad3</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">chan</span>  <span class="kt">int</span> <span class="p">|</span> <span class="kd">interface</span><span class="p">{</span><span class="nx">CmpInt</span><span class="p">}</span> <span class="c1">// error
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
<li>
<p>å¸¦æ–¹æ³•çš„æ¥å£ï¼ˆæ— è®ºæ˜¯åŸºæœ¬æ¥å£è¿˜æ˜¯ä¸€èˆ¬æ¥å£ï¼‰ï¼Œéƒ½ä¸èƒ½å†™å…¥æ¥å£çš„å¹¶é›†ä¸­</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-go" data-lang="go"><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="kt">error</span> <span class="c1">// errorï¼Œerror æ˜¯å¸¦æ–¹æ³•çš„æ¥å£(åŸºæœ¬æ¥å£)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kd">type</span> <span class="nx">DataProcessor</span><span class="p">[</span><span class="nx">T</span> <span class="nx">any</span><span class="p">]</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="err">~</span><span class="p">[]</span><span class="kt">byte</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nf">Process</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="p">(</span><span class="nx">newData</span> <span class="nx">T</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nf">Save</span><span class="p">(</span><span class="nx">data</span> <span class="nx">T</span><span class="p">)</span> <span class="kt">error</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// errorï¼Œå®ä¾‹åŒ–åçš„ DataProcessor[string] æ˜¯ä¸€èˆ¬æ¥å£ï¼Œä¸èƒ½å†™å…¥ç±»å‹å¹¶é›†
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kd">type</span> <span class="nx">_</span> <span class="kd">interface</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="err">~</span><span class="kt">int</span> <span class="p">|</span> <span class="err">~</span><span class="kt">string</span> <span class="p">|</span> <span class="nx">Dataprocessor</span><span class="p">[</span><span class="kt">string</span><span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></li>
</ol>
<h2 id="æ€»ç»“">æ€»ç»“</h2>
<p>ä»¥ä¸Šå°±æ˜¯ Go è¯­è¨€å®˜æ–¹åœ¨ 1.18 å¼•å…¥çš„æ–°ç‰¹æ€§æ³›å‹ã€‚</p>
<blockquote>
<p>æ³›å‹å¹¶ä¸å–ä»£1.18ä¹‹å‰åˆ©ç”¨æ¥å£+åå°„çš„æ–¹å¼å®ç°çš„åŠ¨æ€ç±»å‹ï¼Œæ³›å‹çš„é€‚ç”¨åœºæ™¯æ˜¯ï¼šå½“ä½ éœ€è¦å¯¹ä¸åŒç±»å‹ä¹¦å†™ç›¸åŒé€»è¾‘æ—¶ï¼Œé€‚ç”¨æ³›å‹æ˜¯ç®€åŒ–ä»£ç çš„æœ€å¥½åŠæ³•ï¼ˆæ¯”å¦‚å†™ä¸€äº›æ•°æ®ç»“æ„ï¼Œå †ã€æ ˆã€é“¾è¡¨ç­‰ï¼‰</p>
</blockquote>
<h2 id="å‚è€ƒ">å‚è€ƒ</h2>
<ul>
<li>[1] <a href="https://segmentfault.com/a/1190000041634906">Go 1.18 æ³›å‹å…¨é¢è®²è§£ï¼šä¸€ç¯‡è®²æ¸…æ³›å‹çš„å…¨éƒ¨</a></li>
</ul>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">æ–‡ç« ä½œè€…</span>
    <span class="item-content">MysticalDevil</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">ä¸Šæ¬¡æ›´æ–°</span>
    <span class="item-content">
        2023-01-23
        
    </span>
  </p>
  
  
</div>
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">èµèµæ”¯æŒ</label>
  <div class="qr-code">
    
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/wechat-reward-qrcode.png">
        <span>å¾®ä¿¡æ‰“èµ</span>
      </label>
    <label class="qr-code-image" for="reward">
        <img class="image" src="/images/alipay-reward-qrcode.png">
        <span>æ”¯ä»˜å®æ‰“èµ</span>
      </label>
  </div>
</div><footer class="post-footer">
      <div class="post-tags">
          <a href="/tags/go/">Go</a>
          <a href="/tags/generic/">Generic</a>
          </div>
      <nav class="post-nav">
        
        
      </nav>
    </footer>
  </article>
        </div>
        

  

  
    <script src="https://utteranc.es/client.js"
            repo="MysticalDevil/mysticaldevil.github.io"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="jinpeng7981@outlook.com" class="iconfont icon-email" title="email"></a>
      <a href="https://stackoverflow.com/users/15772868/mystical-c" class="iconfont icon-stack-overflow" title="stack-overflow"></a>
      <a href="https://github.com/MysticalDevil" class="iconfont icon-github" title="github"></a>
      <a href="https://space.bilibili.com/10997055?spm_id_from=333.1007.0.0" class="iconfont icon-bilibili" title="bilibili"></a>
  <a href="/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    ç”± <a class="hexo-link" href="https://gohugo.io">Hugo</a> å¼ºåŠ›é©±åŠ¨
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    ä¸»é¢˜ - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> æœ¬ç«™æ€»è®¿é—®é‡ <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> æ¬¡ </span>
      <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> æœ¬ç«™æ€»è®¿å®¢æ•° <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> äºº </span>
  </div>

  <span class="copyright-year">
    &copy; 
    2023<span class="heart"><i class="iconfont icon-heart"></i></span><span>MysticalDevil</span>
  </span>
</div>

    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.4ae89da218555efa0e7093a20b92017d2e1202b66fff9fc2edf4cb8d44b44c6e.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex: {
        inlineMath: [['$','$'], ['\\(','\\)']],
        }
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@3.0.5/es5/tex-mml-chtml.js" integrity="sha256-HGLuEfFcsUJGhvB8cQ8nr0gai9EucOOaIxFw7qxmd+w=" crossorigin="anonymous"></script>








</body>
</html>
